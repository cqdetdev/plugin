# Plugin Server Configuration
# Dragonfly runs a gRPC server that plugins connect to
# Use Unix socket for best performance
server_port: "unix:///tmp/dragonfly_plugin.sock"
# Or use TCP for remote: "127.0.0.1:50050"

plugins:
  # - id: example-node
  #   name: Example Node Plugin
  #   command: "node"
  #   args: ["../examples/plugins/node/hello.js"]
  #   env:
  #     NODE_ENV: development
  - id: example-typescript
    name: Example TypeScript Plugin
    command: "node"
    args: ["../examples/plugins/typescript/dist/index.js"]
    env:
      NODE_ENV: production
  - id: example-php
    name: Example PHP Plugin
    # command: "../examples/plugins/php/bin/php7/bin/php"
    # args: ["../examples/plugins/php/src/HelloPlugin.php"]
    command: "docker"
    args:
      - "compose"
      - "-f"
      - "../examples/plugins/php/docker-compose.yml"
      - "up"
      - "--abort-on-container-exit"
    env:
      PHP_ENV: production
